<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mocha 0.9 Released - James Mead</title>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="keywords" content="mocha mock release ruby stub testing jmock" />
    <meta name="author" content= "James Mead" />

    <meta name="verify-v1" content="H0rIfyqCDW+br6ieZtuZ+Hnt3ii3FpF22qFYjZmO+3E=" />
    <meta name="y_key" content="5f5b0de20991e0c2" />
    <meta name="msvalidate.01" content="5D5476B4F9F70AAFE14D519093E3FFA8" />

    <link href="/images/favicon.gif" rel="icon" type="image/gif" />

    <link href="/stylesheets/yui/3.18.1/cssreset-min.css" rel="stylesheet" /><link href="/stylesheets/yui/3.18.1/cssfonts-min.css" rel="stylesheet" /><link href="/stylesheets/yui/3.18.1/cssbase-min.css" rel="stylesheet" />

    <link href="/stylesheets/site.css" rel="stylesheet" />

    <link href="/stylesheets/prettify/prettify.css" rel="stylesheet" />
    <script src="/javascripts/prettify/prettify.js" defer="defer"></script>

    <link rel="alternate" type="application/atom+xml" title="Atom" href="http://feeds.jamesmead.org/floehopper-blog" />

    <link rel="webmention" href="https://webmention.io/jamesmead.org/webmention" />

    <link rel="prev" href="/blog/2008-06-19-mocha-mailing-list-move" />
    <link rel="next" href="/blog/2008-07-12-optional-parameters-in-mocha" />
    <link rel="first" href="/blog/2004-05-14-unit-tests-can-100-coverage-be-a-bad-thing" />
    <link rel="last" href="/blog/2022-05-18-how-to-backup-google-drive-to-s3-using-the-aws-cdk" />
    <link rel="index" href="/blog" />

  </head>
  <body class="blog blog_2008-06-24-mocha-0-9-released" onload="prettyPrint()">
    <div id="doc">
      <div class="skip-links">
        <a href="#bd">Skip to main content</a>
      </div>

      <header id="hd">
        <nav aria-label="Primary">
          <a href="/">Home</a>
          &middot;
          <a href="/blog/">Blog</a>
          &middot;
          <a href="/adventures/">Adventures</a>
          &middot;
          <a href="/notes/">Notes</a>
          &middot;
          <a href="/talks/">Talks</a>
          &middot;
          <a href="/projects/">Projects</a>
        </nav>
      </header>

      <main id="bd">
          <article class="h-entry">
    <header>
      <h1 class="p-name">Mocha 0.9 Released</h1>
    </header>

    <section class="e-content">
      <p>There&#8217;s been quite a bit of work going on in <a href="https://mocha.jamesmead.org/">Mocha</a> over recent months, but a release is long overdue. The API is now pretty stable and so this release jumps from version 0.5 to 0.9. Much of the work has been refactoring Mocha&#8217;s internals to support new features and make the code more maintainable.</p>
<p>Before attempting the refactoring, extensive acceptance tests were added. One of the benefits of this is that it should now be easier to write new acceptance tests if you want to suggest new features or illustrate a bug ;-)</p>
<p>Here&#8217;s a quick summary of the changes in the release. I&#8217;ll try to post some code examples here in the near future.</p>
<h2>Ordering constraints</h2>
<p>Based on the <a href="http://jmock.org/">JMock</a> constraints with the same names&#8230;</p>
<ul>
	<li>Added &#8220;sequences&#8221; for constraining the order of expected invocations. See <a href="https://web.archive.org/web/20081012234732/http://mocha.rubyforge.org/classes/Mocha/Standalone.html#M000008">Standalone#sequence</a> and <a href="https://web.archive.org/web/20080920065755/http://mocha.rubyforge.org/classes/Mocha/Expectation.html#M000049">Expectation#in_sequence</a>.</li>
	<li>Added &#8220;states&#8221; for constraining the order of expected invocations. See <a href="https://web.archive.org/web/20081012234732/http://mocha.rubyforge.org/classes/Mocha/Standalone.html#M000009">Standalone#states</a>, <a href="https://web.archive.org/web/20080920065755/http://mocha.rubyforge.org/classes/Mocha/Expectation.html#M000047">Expectation#then</a>, <a href="https://web.archive.org/web/20080920065755/http://mocha.rubyforge.org/classes/Mocha/Expectation.html#M000048">Expectation#when</a> and <a href="https://web.archive.org/web/20081012234444/http://mocha.rubyforge.org/classes/Mocha/StateMachine.html">StateMachine</a>.</li>
</ul>
<h2>Configurable warnings or errors</h2>
<ul>
	<li>When a method on a non-public method is stubbed</li>
	<li>When a method on a non-existent method is stubbed</li>
	<li>When a method on a non-mock object is stubbed (partial mocking)</li>
	<li>When a method is stubbed unnecessarily (i.e. the stubbed method is not called during the test)</li>
</ul>
<p>See <a href="https://web.archive.org/web/20081012234812/http://mocha.rubyforge.org/classes/Mocha/Configuration.html">Configuration</a> for more details.</p>
<h2>Improved error messages</h2>
<ul>
	<li>A more readable and complete list of unsatisfied expectations, satisfied expectations and state machines.</li>
	<li>Display more sensible failure message for any_instance expectations.</li>
</ul>
<h2>Parameter matchers</h2>
<ul>
	<li>New to this release: <a href="https://web.archive.org/web/20081002142639/http://mocha.rubyforge.org/classes/Mocha/ParameterMatchers.html#M000024">optionally</a> (allows matching of optional parameters if available), <a href="https://web.archive.org/web/20081002142639/http://mocha.rubyforge.org/classes/Mocha/ParameterMatchers.html#M000027">yaml_equivalent</a> (allows matching of YAML that represents the specified object), <a href="https://web.archive.org/web/20081002142639/http://mocha.rubyforge.org/classes/Mocha/ParameterMatchers.html#M000026">responds_with</a> (tests the quack not the duck).</li>
	<li>Nesting of matchers is now supported.</li>
</ul>
<h2>Syntax shortcut</h2>
<p>An optional block can be passed into the <a href="https://web.archive.org/web/20081012234732/http://mocha.rubyforge.org/classes/Mocha/Standalone.html#M000005">Standalone#mock</a> method. The block is evaluated in the context of the new mock instance and can be used as a shortcut to set up expectations.</p>
<h2>Ruby &amp; Rails compatibility</h2>
<p>Tested with Ruby 1.8.4, 1.8.5, 1.8.6 &amp; 1.9. All related bugs and warnings believed to be fixed.</p>
<p>Tested with Rails 1.2.3 &amp; Rails 2.1.0.</p>
<h2>Deprecation</h2>
<p>There is no longer any need to have a &#8220;require &#8216;stubba&#8217;&#8221; statement in your code. A deprecation warning has been added to this effect, because the file will be removed in a future release.</p>
<h2>Bug fixes</h2>
<ul>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=18914&amp;group_id=1917&amp;atid=7477">18914 in revision 296</a></li>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=18917&amp;group_id=1917&amp;atid=7477">18917 in revision 295</a></li>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=18336&amp;group_id=1917&amp;atid=7477">18336 in revision 287</a></li>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=17835&amp;group_id=1917&amp;atid=7477">17835 in revision 255</a></li>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=17412&amp;group_id=1917&amp;atid=7477">17412 in revision 242</a></li>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=15977&amp;group_id=1917&amp;atid=7477">15977 in revision 198</a></li>
	<li><a href="http://rubyforge.org/tracker/index.php?func=detail&amp;aid=11885&amp;group_id=1917&amp;atid=7477">11885 in revision 156</a></li>
</ul>
    </section>

    <footer>
      <p class="metadata">
        Published by <a class="p-author h-card" href="https://jamesmead.org/">James Mead</a> on <a class="u-url" href="https://jamesmead.org/blog/2008-06-24-mocha-0-9-released"><time class="dt-published" datetime="2008-06-24T19:14:12+00:00">24 Jun 2008 at 19:14</time></a>
      </p>
      <div class="webmentions" data-webmentions="https://jamesmead.org/blog/2008-06-24-mocha-0-9-released">
  <template id="webmention-template">
    <li class="webmention">
      <div>
        <a class="author">
          <span class="author-name"></span>
        </a>
        <a class="action"></a>
      </div>
      <div class="content"></div>
    </li>
  </template>
</div>

<script src="/javascripts/webmentions.js" type="text/javascript" charset="utf-8" defer></script>

    </footer>
  </article>


          <nav id="navigation" aria-label="Inter-article">
      <a href="/blog/2008-06-19-mocha-mailing-list-move" class="previous">&lt; Mocha Mailing List Move</a>
      <a href="/blog/2008-07-12-optional-parameters-in-mocha" class="next">Optional Parameters in Mocha &gt;</a>
  </nav>

      </main>

      <footer id="ft">
        <nav aria-label="Footer">
          <a href="/contact">Contact</a>
          &middot;
          <a href="/history">History</a>
          &middot;
          <a href="/colophon">Colophon</a>
          &middot;
          <a href="/links">Links</a>
        </nav>
        <div id="indieweb-ring">
          <a href="https://xn--sr8hvo.ws/%F0%9F%93%BF%F0%9F%8C%91%F0%9F%A6%82/previous">‚Üê</a>
          An IndieWeb Webring üï∏üíç
          <a href="https://xn--sr8hvo.ws/%F0%9F%93%BF%F0%9F%8C%91%F0%9F%A6%82/next">‚Üí</a>
        </div>
        <p id="creative-commons" xmlns:dct="http://purl.org/dc/terms/" xmlns:cc="http://creativecommons.org/ns#" class="license-text">
          This work by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="jamesmead.org">James Mead</a> is licensed under
          <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0
            <img style="height:16px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" loading="lazy" alt="Creative Commons logo" />
            <img style="height:16px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" loading="lazy" alt="Creative Commons Attribution icon" />
            <img style="height:16px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" loading="lazy" alt="Creative Commons ShareAlike icon" />
          </a>
        </p>
      </footer>
    </div>
  </body>
</html>
